{% extends "base.html" %}

{% block title %}Fore Titans{% endblock %}

{% block body %}
<div class="relative w-full overflow-hidden mt-[128px]">
  <div id="carousel" class="flex transition-transform duration-700 ease-in-out">
    {% for img in slider_images %}
    <img src="{{ img.image.url }}" class="carousel-img"
      alt="Slide {{ forloop.counter }}">
    {% empty %}
    <img src="https://placehold.co/1920x600/cccccc/000000?text=No+Images+Uploaded"
      class="carousel-img" alt="No Image">
    {% endfor %}
  </div>


  <button onclick="prevSlide()"
    class="absolute top-1/2 left-2 -translate-y-1/2 bg-black/50 text-white px-3 py-2 rounded-full">&#10094;</button>
  <button onclick="nextSlide()"
    class="absolute top-1/2 right-2 -translate-y-1/2 bg-black/50 text-white px-3 py-2 rounded-full">&#10095;</button>

  <div class="absolute bottom-3 left-1/2 -translate-x-1/2 flex gap-2">
    {% for img in slider_images %}
    <span class="dot w-3 h-3 bg-gray-400 rounded-full cursor-pointer"
      onclick="goToSlide({{ forloop.counter0 }})"></span>
    {% endfor %}

  </div>
</div>


<section class="bg-white py-10">
  <div class="max-w-7xl mx-auto px-4">
    <h2 class="relative text-3xl font-extrabold text-center text-[#0d012e] mb-10">
      TOURNAMENTS
      <span class="absolute left-1/2 -translate-x-1/2 -bottom-2 w-16 h-1 bg-yellow-400 rounded"></span>
    </h2>

    <div class="relative overflow-hidden">
      <div id="scroll-container" class="flex space-x-6 w-max animate-scroll">

        {% for t in past_tournaments %}
        <div class="w-[300px] h-[420px] bg-white rounded-xl shadow-lg overflow-hidden border border-red-300 fade-card flex flex-col">
          <div class="bg-red-700 text-white px-4 py-2 flex justify-between items-center">
            <span class="font-bold text-sm">{{ t.end_date|date:"d M Y" }}</span>
            <span class="bg-red-900 text-xs px-3 py-1 rounded-full">ENDED</span>
          </div>
          <div class="p-6 text-center flex-1 flex flex-col">
            {% if t.logo %}
            <img src="{{ t.logo.url }}" alt="{{ t.name }} Logo" class="mx-auto mb-4 w-20 h-20 object-contain">
            {% endif %}
            <p class="text-sm text-gray-500 mb-1">Tournament Finished</p>
            <h3 class="text-lg font-bold text-[#0d012e] mb-2 line-clamp-2">{{ t.name }}</h3>
            <p class="text-sm text-gray-600 mb-1">📍 {{ t.venue }}</p>
            <p class="text-sm text-gray-500">👥 {{ t.num_teams }} Teams | ⚡ {{ t.num_matches }} Matches</p>
            <a href="#" class="mt-auto inline-block bg-red-600 hover:bg-red-700 text-white font-bold px-4 py-2 rounded-md">
              VIEW FIXTURES
            </a>
          </div>
        </div>
        {% endfor %}

        {% for t in current_tournaments %}
        <div class="w-[300px] h-[420px] bg-white rounded-xl shadow-lg overflow-hidden border border-blue-300 blink-card flex flex-col">
          <div class="bg-[#0d012e] text-white px-4 py-2 flex justify-between items-center">
            <span class="font-bold text-sm">{{ t.start_date|date:"d M Y" }}</span>
            <span class="bg-blue-600 text-xs px-3 py-1 rounded-full">LIVE</span>
          </div>
          <div class="p-6 text-center flex-1 flex flex-col">
            {% if t.logo %}
            <img src="{{ t.logo.url }}" alt="{{ t.name }} Logo" class="mx-auto mb-4 w-20 h-20 object-contain">
            {% endif %}
            <p class="text-sm text-gray-500 mb-1">Ongoing Tournament</p>
            <h3 class="text-lg font-bold text-[#0d012e] mb-2 line-clamp-2">{{ t.name }}</h3>
            <p class="text-sm text-gray-600 mb-1">📍 {{ t.venue }}</p>
            <p class="text-sm text-gray-500">👥 {{ t.num_teams }} Teams | ⚡ {{ t.num_matches }} Matches</p>
            <a href="#" class="mt-auto inline-block bg-yellow-400 hover:bg-yellow-500 text-black font-bold px-4 py-2 rounded-md">
              VIEW FIXTURES
            </a>
          </div>
        </div>
        {% endfor %}

        {% for t in upcoming_tournaments %}
        <div class="w-[300px] h-[420px] bg-white rounded-xl shadow-lg overflow-hidden border border-green-300 flex flex-col">
          <div class="bg-green-700 text-white px-4 py-2 flex justify-between items-center">
            <span class="font-bold text-sm">{{ t.start_date|date:"d M Y" }}</span>
            <span class="bg-green-900 text-xs px-3 py-1 rounded-full">UPCOMING</span>
          </div>
          <div class="p-6 text-center flex-1 flex flex-col">
            {% if t.logo %}
            <img src="{{ t.logo.url }}" alt="{{ t.name }} Logo" class="mx-auto mb-4 w-20 h-20 object-contain">
            {% endif %}
            <p class="text-sm text-gray-500 mb-1">Tournament Yet to Start</p>
            <h3 class="text-lg font-bold text-[#0d012e] mb-2 line-clamp-2">{{ t.name }}</h3>
            <p class="text-sm text-gray-600 mb-1">📍 {{ t.venue }}</p>
            <p class="text-sm text-gray-500">👥 {{ t.num_teams }} Teams | ⚡ {{ t.num_matches }} Matches</p>
            <a href="#" class="mt-auto inline-block bg-green-600 hover:bg-green-700 text-white font-bold px-4 py-2 rounded-md">
              VIEW FIXTURES
            </a>
          </div>
        </div>
        {% endfor %}

        {% for t in past_tournaments %}
        <div class="w-[300px] h-[420px] bg-white rounded-xl shadow-lg overflow-hidden border border-red-300 fade-card flex flex-col">
          <div class="bg-red-700 text-white px-4 py-2 flex justify-between items-center">
            <span class="font-bold text-sm">{{ t.end_date|date:"d M Y" }}</span>
            <span class="bg-red-900 text-xs px-3 py-1 rounded-full">ENDED</span>
          </div>
          <div class="p-6 text-center flex-1 flex flex-col">
            {% if t.logo %}
            <img src="{{ t.logo.url }}" alt="{{ t.name }} Logo" class="mx-auto mb-4 w-20 h-20 object-contain">
            {% endif %}
            <p class="text-sm text-gray-500 mb-1">Tournament Finished</p>
            <h3 class="text-lg font-bold text-[#0d012e] mb-2 line-clamp-2">{{ t.name }}</h3>
            <p class="text-sm text-gray-600 mb-1">📍 {{ t.venue }}</p>
            <p class="text-sm text-gray-500">👥 {{ t.num_teams }} Teams | ⚡ {{ t.num_matches }} Matches</p>
            <a href="#" class="mt-auto inline-block bg-red-600 hover:bg-red-700 text-white font-bold px-4 py-2 rounded-md">
              VIEW FIXTURES
            </a>
          </div>
        </div>
        {% endfor %}
        {% for t in current_tournaments %}
        <div class="w-[300px] h-[420px] bg-white rounded-xl shadow-lg overflow-hidden border border-blue-300 blink-card flex flex-col">
          <div class="bg-[#0d012e] text-white px-4 py-2 flex justify-between items-center">
            <span class="font-bold text-sm">{{ t.start_date|date:"d M Y" }}</span>
            <span class="bg-blue-600 text-xs px-3 py-1 rounded-full">LIVE</span>
          </div>
          <div class="p-6 text-center flex-1 flex flex-col">
            {% if t.logo %}
            <img src="{{ t.logo.url }}" alt="{{ t.name }} Logo" class="mx-auto mb-4 w-20 h-20 object-contain">
            {% endif %}
            <p class="text-sm text-gray-500 mb-1">Ongoing Tournament</p>
            <h3 class="text-lg font-bold text-[#0d012e] mb-2 line-clamp-2">{{ t.name }}</h3>
            <p class="text-sm text-gray-600 mb-1">📍 {{ t.venue }}</p>
            <p class="text-sm text-gray-500">👥 {{ t.num_teams }} Teams | ⚡ {{ t.num_matches }} Matches</p>
            <a href="#" class="mt-auto inline-block bg-yellow-400 hover:bg-yellow-500 text-black font-bold px-4 py-2 rounded-md">
              VIEW FIXTURES
            </a>
          </div>
        </div>
        {% endfor %}
        {% for t in upcoming_tournaments %}
        <div class="w-[300px] h-[420px] bg-white rounded-xl shadow-lg overflow-hidden border border-green-300 flex flex-col">
          <div class="bg-green-700 text-white px-4 py-2 flex justify-between items-center">
            <span class="font-bold text-sm">{{ t.start_date|date:"d M Y" }}</span>
            <span class="bg-green-900 text-xs px-3 py-1 rounded-full">UPCOMING</span>
          </div>
          <div class="p-6 text-center flex-1 flex flex-col">
            {% if t.logo %}
            <img src="{{ t.logo.url }}" alt="{{ t.name }} Logo" class="mx-auto mb-4 w-20 h-20 object-contain">
            {% endif %}
            <p class="text-sm text-gray-500 mb-1">Tournament Yet to Start</p>
            <h3 class="text-lg font-bold text-[#0d012e] mb-2 line-clamp-2">{{ t.name }}</h3>
            <p class="text-sm text-gray-600 mb-1">📍 {{ t.venue }}</p>
            <p class="text-sm text-gray-500">👥 {{ t.num_teams }} Teams | ⚡ {{ t.num_matches }} Matches</p>
            <a href="#" class="mt-auto inline-block bg-green-600 hover:bg-green-700 text-white font-bold px-4 py-2 rounded-md">
              VIEW FIXTURES
            </a>
          </div>
        </div>
        {% endfor %}

      </div>
    </div>
  </div>
</section>



<section class="bg-[#0e1a2b] py-16" x-data="teamModal()">
  <div class="max-w-7xl mx-auto px-4 text-center">
    <h2 class="text-3xl font-extrabold text-white mb-4 relative inline-block">
      MEET OUR TEAM
      <span class="absolute left-1/2 -translate-x-1/2 -bottom-2 w-16 h-1 bg-yellow-400 rounded"></span>
    </h2>
    <p class="text-gray-300 mb-12">
      Fore Titan's teams showcase talent and competition. Discover the teams, meet the players,
      and follow their league journey.
    </p>

    <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-6" style="margin-left: 220px;">
      {% for member in team|slice:":4" %}
      <div class="relative rounded-xl overflow-hidden shadow-lg hover:scale-105 transform transition cursor-pointer"
        @click="show({
              name: '{{ member.name|escapejs }}',
              image: '{{ member.image.url }}',
              linkedin: '{{ member.linkedin|default:""|escapejs }}',
              instagram: '{{ member.instagram|default:""|escapejs }}',
              facebook: '{{ member.facebook|default:""|escapejs }}'
            })">
        <img src="{{ member.image.url }}" alt="{{ member.name }}" class="w-full h-64 object-cover">
        <div class="absolute bottom-0 w-full bg-black/60 text-white text-center py-2">
          <h3 class="text-lg font-bold">{{ member.name }}</h3>
          <h3 class="text-lg font-bold text-yellow-400">{{ member.role }}</h3>
        </div>
      </div>
      {% empty %}
      <p class="text-gray-400 col-span-full">No team members uploaded yet.</p>
      {% endfor %}
    </div>
  </div>

  <template x-teleport="body">
    <div x-show="open" x-transition.opacity
      class="fixed inset-0 z-[100] bg-black/70 flex items-center justify-center p-4" @click.self="hide()"
      @keydown.escape.window="hide()" style="display:none;">
      <div class="relative w-80 h-96 perspective">
        <div class="flip-card w-full h-full transition-transform duration-700" :class="flipped ? 'rotate-y-180' : ''">
          <div class="flip-front absolute inset-0">
            <img :src="current.image" :alt="current.name" class="w-full h-full object-cover rounded-xl">
            <div class="absolute inset-x-0 bottom-0 bg-black/60 text-white text-center py-2 rounded-b-xl">
              <h3 class="font-semibold" x-text="current.name"></h3>
            </div>
            <button @click.stop="flipped = true"
              class="absolute left-1/2 -translate-x-1/2 bottom-20 bg-yellow-400 text-black font-semibold px-4 py-2 rounded-lg">
              View Profile
            </button>
            <button @click.stop="hide()"
              class="absolute top-3 right-3 bg-white/90 text-black px-2.5 py-1 rounded-md text-sm">✕</button>
          </div>

          <div class="flip-back absolute inset-0 rounded-xl overflow-hidden">
            <img :src="current.image" :alt="current.name" class="w-full h-full object-cover">

            <div class="absolute inset-0 bg-black/50 flex flex-col items-center justify-center text-white p-6">
              <h3 class="text-xl font-bold mb-5" x-text="current.name"></h3>

              <div class="flex items-center gap-6">
                <template x-if="current.linkedin">
                  <a :href="current.linkedin" target="_blank" rel="noopener" class="hover:opacity-80">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-9 h-9" viewBox="0 0 24 24" fill="currentColor">
                      <path
                        d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.447-2.136 2.943v5.663H9.35V9h3.413v1.561h.049c.476-.9 1.637-1.852 3.368-1.852 3.602 0 4.267 2.371 4.267 5.455v6.288zM5.337 7.433a2.062 2.062 0 1 1 0-4.125 2.062 2.062 0 0 1 0 4.125zM6.997 20.452H3.674V9h3.323v11.452z" />
                    </svg>
                  </a>
                </template>

                <template x-if="current.instagram">
                  <a :href="current.instagram" target="_blank" rel="noopener" class="hover:opacity-80">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-9 h-9" viewBox="0 0 24 24" fill="currentColor">
                      <path
                        d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5zm10 2H7a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3zm-5 3a5 5 0 1 1 0 10 5 5 0 0 1 0-10zm0 2.2A2.8 2.8 0 1 0 12 17.8 2.8 2.8 0 0 0 12 9.2zm5.25-2.2a1.05 1.05 0 1 1 0 2.1 1.05 1.05 0 0 1 0-2.1z" />
                    </svg>
                  </a>
                </template>

                <template x-if="current.facebook">
                  <a :href="current.facebook" target="_blank" rel="noopener" class="hover:opacity-80">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-9 h-9" viewBox="0 0 24 24" fill="currentColor">
                      <path
                        d="M22 12.06C22 6.505 17.523 2 12 2S2 6.505 2 12.06C2 17.08 5.657 21.245 10.438 22v-7.03H7.898v-2.91h2.54V9.845c0-2.507 1.492-3.89 3.777-3.89 1.094 0 2.238.196 2.238.196v2.47h-1.26c-1.242 0-1.63.776-1.63 1.57v1.88h2.773l-.443 2.91h-2.33V22C18.343 21.245 22 17.08 22 12.06z" />
                    </svg>
                  </a>
                </template>
              </div>

              <div class="mt-6 flex gap-3">
                <button @click="flipped = false"
                  class="bg-gray-500 hover:bg-gray-600 px-4 py-2 rounded-lg">Back</button>
                <button @click="hide()" class="bg-red-500 hover:bg-red-600 px-4 py-2 rounded-lg">Close</button>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
  </template>
</section>


<section class="bg-white py-16">
  <div class="max-w-7xl mx-auto px-4">
    <h2 class="text-3xl font-extrabold text-center text-[#0d012e] mb-12 relative inline-block">
      OUR BLOGS
      <span class="absolute left-1/2 -translate-x-1/2 -bottom-2 w-16 h-1 bg-yellow-400 rounded"></span>
    </h2>

    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">

      <div class="bg-white rounded-lg shadow-md overflow-hidden">
        <img src="your-image-link-here" alt="Blog 1" class="w-full h-56 object-cover">
        <div class="p-4">
          <h3 class="font-semibold text-lg text-gray-900">
            A Trophy Worthy of Legends: UPPVL Unveils its Symbol of Glory
          </h3>
        </div>
      </div>

      <div class="bg-white rounded-lg shadow-md overflow-hidden">
        <img src="your-image-link-here" alt="Blog 2" class="w-full h-56 object-cover">
        <div class="p-4">
          <h3 class="font-semibold text-lg text-gray-900">
            The Bidding Battle Begins: Inside the UPPVL 2025 Player Auction
          </h3>
        </div>
      </div>

      <div class="bg-white rounded-lg shadow-md overflow-hidden">
        <img src="your-image-link-here" alt="Blog 3" class="w-full h-56 object-cover">
        <div class="p-4">
          <h3 class="font-semibold text-lg text-gray-900">
            NIVIA x UPPVL: Powering the Game, One Spike at a Time
          </h3>
        </div>
      </div>

      <div class="bg-white rounded-lg shadow-md overflow-hidden">
        <img src="your-image-link-here" alt="Blog 4" class="w-full h-56 object-cover">
        <div class="p-4">
          <h3 class="font-semibold text-lg text-gray-900">
            Celebrating the Grand Auction Ceremony of UPPVL 2025
          </h3>
        </div>
      </div>

      <div class="bg-white rounded-lg shadow-md overflow-hidden">
        <img src="your-image-link-here" alt="Blog 5" class="w-full h-56 object-cover">
        <div class="p-4">
          <h3 class="font-semibold text-lg text-gray-900">
            Players Ready to Shine: Meet the Stars of UPPVL
          </h3>
        </div>
      </div>

    </div>
  </div>
</section>
<section class="bg-black py-16">
  <div class="max-w-7xl mx-auto px-4">

    <h2 class="text-3xl font-extrabold text-center text-white mb-12 relative inline-block">
      LATEST NEWS
      <span class="absolute left-1/2 -translate-x-1/2 -bottom-2 w-16 h-1 bg-yellow-400 rounded"></span>
    </h2>

    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">

      {% for news in news_list %}
      <a href="{% url 'news' %}"
        class="block bg-white rounded-lg shadow-md overflow-hidden hover:scale-105 transform transition duration-300">

        {% if news.image %}
        <img src="{{ news.image.url }}" alt="{{ news.heading }}" class="w-full h-60 object-contain">
        {% else %}
        <img src="static/default.jpeg" alt="News" class="w-full h-60 object-cover">
        {% endif %}

        <div class="p-4">
          <h3 class="font-semibold text-lg text-gray-900">
            {{ news.heading }}
          </h3>
        </div>
      </a>
      {% endfor %}

    </div>
  </div>
</section>

<section class="py-16 bg-white">
  <div class="max-w-7xl mx-auto px-4 text-center">

    <h2 class="text-3xl font-extrabold mb-12 relative inline-block">
      OUR PARTNERS
      <span class="absolute left-1/2 -translate-x-1/2 -bottom-2 w-16 h-1 bg-yellow-400 rounded"></span>
    </h2>

    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-10 text-center">

      {% for sponsor in sponsors %}
      <div>
        {% if sponsor.info %}
        <h4 class="text-sm font-medium mb-2">{{ sponsor.info|upper }}</h4>
        {% endif %}

        {% if sponsor.url %}
        <a href="{{ sponsor.url }}" target="_blank">
          <img src="{{ sponsor.image.url }}" alt="{{ sponsor.info }}" class="mx-auto h-20 object-contain">
        </a>
        {% else %}
        <img src="{{ sponsor.image.url }}" alt="{{ sponsor.info }}" class="mx-auto h-20 object-contain">
        {% endif %}
      </div>
      {% empty %}
      <p class="col-span-full text-gray-500">No sponsors added yet.</p>
      {% endfor %}

    </div>
  </div>
</section>



{% endblock body%}

{% block scripts %}
<script>
  const carousel = document.getElementById("carousel");
  const dots = document.querySelectorAll(".dot");
  let currentIndex = 0;
  const totalSlides = carousel.children.length;

  function updateCarousel() {
    carousel.style.transform = `translateX(-${currentIndex * 100}%)`;
    dots.forEach((dot, idx) => {
      dot.classList.toggle("bg-gray-800", idx === currentIndex);
      dot.classList.toggle("bg-gray-400", idx !== currentIndex);
    });
  }
  function nextSlide() { currentIndex = (currentIndex + 1) % totalSlides; updateCarousel(); }
  function prevSlide() { currentIndex = (currentIndex - 1 + totalSlides) % totalSlides; updateCarousel(); }
  function goToSlide(i) { currentIndex = i; updateCarousel(); }

  setInterval(nextSlide, 3000);
  updateCarousel();
</script>
<script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
<script>
  function teamModal() {
    return {
      open: false,
      flipped: false,
      current: { name: '', image: '', linkedin: '', instagram: '', facebook: '' },
      show(m) { this.current = m; this.open = true; this.flipped = false; },
      hide() { this.open = false; this.flipped = false; }
    }
  }
</script>
<script>
  const scrollContainer = document.getElementById('scroll-container');

  scrollContainer.addEventListener('mouseenter', () => {
    scrollContainer.classList.add('paused');
  });

  scrollContainer.addEventListener('mouseleave', () => {
    scrollContainer.classList.remove('paused');
  });
</script>
<style>
  @keyframes scroll {
    0% {
      transform: translateX(0);
    }

    100% {
      transform: translateX(-50%);
    }

    /* Moves left for loop effect */
  }

  .animate-scroll {
    display: flex;
    animation: scroll 50s linear infinite;
  }

  /* Add the new paused class */
  .paused {
    animation-play-state: paused;
  }

  /* Blink for current tournaments */
  @keyframes blink {

    0%,
    50%,
    100% {
      opacity: 1;
    }

    25%,
    75% {
      opacity: 0.5;
    }
  }

  .blink-card {
    animation: blink 1.5s infinite;
  }

  /* Fade for past tournaments */
  .fade-card {
    opacity: 0.6;
    transition: opacity 0.3s ease-in-out;
  }

  .fade-card:hover {
    opacity: 1;
  }

  .perspective {
    perspective: 1000px;
  }

  .flip-card {
    transform-style: preserve-3d;
  }

  .flip-front,
  .flip-back {
    backface-visibility: hidden;
  }

  .flip-back {
    transform: rotateY(180deg);
  }

  .rotate-y-180 {
    transform: rotateY(180deg);
  }
.carousel-img {
  flex: 0 0 100%;    /* each slide takes full container width */
  width: 100%;
  height: 120vh;     /* or fixed px height if you want */
}
/* Fix Meet Our Team responsiveness */
@media (max-width: 1024px) {
  section[x-data="teamModal()"] .grid {
    margin-left: 0 !important;  /* remove forced left margin */
    justify-content: center;    /* center items on smaller screens */
  }
}

@media (max-width: 640px) {
  .carousel-img {
    height: 60vh !important;  /* smaller carousel height for mobile */

  }

  section[x-data="teamModal()"] .grid {
    grid-template-columns: repeat(1, minmax(0, 1fr)) !important;
    gap: 1rem; /* tighter spacing for mobile */
  }
}

  
</style>

{% endblock %}